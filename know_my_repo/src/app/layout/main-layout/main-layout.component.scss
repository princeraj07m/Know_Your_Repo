@use '../../variables' as *;

.main-layout {
  min-height: 100vh;
  position: relative;
}

.layout-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;

  /* AI-generated futuristic developer theme background */
  background-color: #0f172a; /* fallback if image fails */
  background-image: url('/assets/bg.jpg');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-repeat: no-repeat;

  /* Mobile: scroll with content for better perf (fixed can cause issues) */
  @media (max-width: 768px) {
    background-attachment: scroll;
  }

  /* Dark overlay for readability + subtle blur */
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      linear-gradient(
        180deg,
        rgba(15, 23, 42, 0.85) 0%,
        rgba(30, 41, 59, 0.75) 35%,
        rgba(51, 65, 85, 0.7) 60%,
        rgba(15, 23, 42, 0.88) 100%
      ),
      linear-gradient(
        90deg,
        rgba(15, 23, 42, 0.6) 0%,
        transparent 30%,
        transparent 70%,
        rgba(15, 23, 42, 0.6) 100%
      );
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }
}

.layout-gradient {
  position: absolute;
  inset: 0;
  background:
    linear-gradient(
      160deg,
      transparent 0%,
      rgba(15, 23, 42, 0.4) 20%,
      rgba(59, 130, 246, 0.05) 50%,
      transparent 100%
    ),
    linear-gradient(
      135deg,
      rgba(59, 130, 246, 0.06) 0%,
      transparent 40%,
      transparent 60%,
      rgba(99, 102, 241, 0.05) 100%
    );
  background-size: 100% 100%, 200% 200%;
  animation: layout-gradient-shift 25s ease-in-out infinite;
  opacity: 1;
}

@keyframes layout-gradient-shift {
  0%, 100% { background-position: 0% 0%, 0% 50%; }
  50% { background-position: 0% 0%, 100% 50%; }
}

.layout-particles {
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(2px 2px at 15% 25%, rgba(59, 130, 246, 0.35) 0%, transparent 45%),
    radial-gradient(2px 2px at 85% 75%, rgba(99, 102, 241, 0.3) 0%, transparent 45%),
    radial-gradient(1.5px 1.5px at 50% 50%, rgba(148, 163, 184, 0.25) 0%, transparent 50%),
    radial-gradient(1px 1px at 70% 15%, rgba(148, 163, 184, 0.2) 0%, transparent 50%),
    radial-gradient(1.5px 1.5px at 25% 85%, rgba(59, 130, 246, 0.2) 0%, transparent 50%),
    radial-gradient(1px 1px at 40% 60%, rgba(99, 102, 241, 0.2) 0%, transparent 50%),
    radial-gradient(1.5px 1.5px at 90% 20%, rgba(148, 163, 184, 0.15) 0%, transparent 50%);
  background-size: 320px 320px;
  animation: particles-float 35s linear infinite;
  opacity: 0.8;
}

@keyframes particles-float {
  0% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-80px, -120px) scale(1.02); }
  66% { transform: translate(-200px, -80px) scale(0.98); }
  100% { transform: translate(-320px, -320px) scale(1); }
}

.main-content {
  position: relative;
  z-index: 1;
  margin-top: $navbar-height;
  margin-left: 0;
  min-height: calc(100vh - #{$navbar-height});
  padding: 1.5rem;
  transition: margin-left 0.4s $ease-out-expo;

  @media (min-width: 992px) {
    margin-left: $sidebar-width;
  }
}

.main-layout.sidebar-collapsed .main-content {
  @media (min-width: 992px) {
    margin-left: $sidebar-collapsed-width;
  }
}

.main-content-inner {
  animation: page-fade-in 0.5s $ease-out-expo forwards;
}

@keyframes page-fade-in {
  from {
    opacity: 0;
    transform: translateY(14px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
